        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>ReactiveKeyboard class / reactive_keyboard Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="reactive_keyboard" data-type="ReactiveKeyboard">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../reactive_keyboard.html">reactive_keyboard</a> &rsaquo; <a href="../reactive_keyboard/ReactiveKeyboard.html">ReactiveKeyboard</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>ReactiveKeyboard</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class ReactiveKeyboard extends ChangeNotifierMixin {
 final Element _target;
 final Stream&lt;KeyEvent&gt; rawKeyCombinedStream;
 final Stream&lt;KeyEvent&gt; rawKeyUpStream;
 final Stream&lt;KeyEvent&gt; rawKeyDownStream;
 final Stream&lt;KeyEvent&gt; rawKeyPressStream;

 bool allowShiftOnlyHotKeys;
 bool allowAltKeyPress;
 bool allowEnterKeyPress;
 Map&lt;KeyCode, int&gt; navKeys;
 List&lt;int&gt; delKeys;

 String _lineBuffer = '';
 String _htmlLineBuffer = '';

 Stream&lt;String&gt; _keyStream;
 Stream&lt;int&gt;    _navStream;
 Stream&lt;String&gt; _hotKeyStream;

 // DOM event types consts
 static const String KEY_PRESS = 'keypress';
 static const String KEY_UP    = 'keyup';
 static const String KEY_DOWN  = 'keydown';

 // Azimuth nav consts
 static const int N  = 0;
 static const int NE = 45;
 static const int E  = 90;
 static const int SE = 135;
 static const int S  = 180;
 static const int SW = 225;
 static const int W  = 270;
 static const int NW = 315;

 static const List&lt;int&gt; DEFAULT_DEL_KEYS = const [KeyCode.DELETE, KeyCode.BACKSPACE, KeyCode.NUM_DELETE];

//  static const Map&lt;int, int&gt; NUM_NAV = const {
//    KeyCode.NUM_NORTH      : N,
//    KeyCode.NUM_NORTH_EAST : NE,
//    KeyCode.NUM_EAST       : E,
//    KeyCode.NUM_SOUTH_EAST : SE,
//    KeyCode.NUM_SOUTH      : S,
//    KeyCode.NUM_SOUTH_WEST : SW,
//    KeyCode.NUM_WEST       : W,
//    KeyCode.NUM_NORTH_WEST : NW
//  };
//
//  static const Map&lt;int, int&gt; ARROW_NAV = const {
//    KeyCode.UP             : N,
//    KeyCode.LEFT           : W,
//    KeyCode.DOWN           : S,
//    KeyCode.RIGHT          : E
//  };
//
//  // Load Runner Nav
//  static const Map&lt;int, int&gt; IJKL_NAV = const {
//    KeyCode.I             : N,
//    KeyCode.J             : W,
//    KeyCode.K             : S,
//    KeyCode.L             : E
//  };
//
//  // VI Nav
//  static const Map&lt;int, int&gt; HJKL_NAV = const {
//    KeyCode.K             : N,
//    KeyCode.H             : W,
//    KeyCode.J             : S,
//    KeyCode.L             : E
//  };
//
//  // DOOM/QUAKE Nav
//  static const Map&lt;int, int&gt; WASD_NAV = const {
//    KeyCode.W             : N,
//    KeyCode.A             : W,
//    KeyCode.S             : S,
//    KeyCode.D             : E
//  };
//
//  static const List&lt;int&gt; _ENTER_KEYS = const [KeyCode.ENTER, KeyCode.MAC_ENTER];
//
//  static const Map&lt;int, String&gt; _COMBO_KEYS = const {
//    KeyCode.OPEN_SQUARE_BRACKET: '[',
//    KeyCode.CLOSE_SQUARE_BRACKET: ']',
//    KeyCode.COMMA: ',',
//    KeyCode.SEMICOLON: ';',
//    KeyCode.BACKSLASH: '\\',
//    KeyCode.SLASH: '/',
//    KeyCode.DASH: '-',
//    KeyCode.APOSTROPHE: "`",
//    KeyCode.EQUALS: '=',
//    KeyCode.FF_EQUALS: '=',
//    KeyCode.FF_SEMICOLON: ';',
//    KeyCode.PERIOD: '.',
//    KeyCode.QUESTION_MARK: '?',
//    KeyCode.SINGLE_QUOTE: "'"
//  };
//
//  static const Map&lt;int, String&gt; _SPECIAL_KEYS = const {
//    KeyCode.F1: 'F1',
//    KeyCode.F2: 'F2',
//    KeyCode.F3: 'F3',
//    KeyCode.F4: 'F4',
//    KeyCode.F5: 'F5',
//    KeyCode.F6: 'F6',
//    KeyCode.F7: 'F7',
//    KeyCode.F8: 'F8',
//    KeyCode.F9: 'F9',
//    KeyCode.F10: 'F10',
//    KeyCode.F11: 'F11',
//    KeyCode.F12: 'F12',
//    KeyCode.TAB: 'tab',
//    KeyCode.END: 'end',
//    KeyCode.HOME: 'home',
//    KeyCode.ESC: 'esc',
//    KeyCode.INSERT: 'insert',
//    KeyCode.LEFT: 'left',
//    KeyCode.RIGHT: 'right',
//    KeyCode.UP: 'up',
//    KeyCode.DOWN: 'down',
//    KeyCode.PAGE_DOWN: 'pagedown',
//    KeyCode.PAGE_UP: 'pageup',
//    KeyCode.PAUSE: 'pause',
//    KeyCode.PRINT_SCREEN: 'printscreen',
//    KeyCode.DELETE: 'delete',
//    KeyCode.BACKSPACE: 'delete'
//  };


 /**
  * The Factory constructor for making a new [ReactiveKeyboard] object
  *
  * Takes a target [Element] to observe [KeyEvent] from and some named
  * parameters to aid in the configuration of the ReactiveKeyboard. Optional
  * named argmuments are as follows:
  *  * [allowShiftOnlyHotKeys] = false: Whether or not to capture shift only
  *    hot key modifiers--excludes shift+_SPECIAL_KEYS
  *  * [allowAltKeyPress] = false: Whether or not to allow [KeyCode.ALT] key presses
  *    through the [keyStream]
  *  * [allowEnterKeyPress] = false: Whether or not to include the [KeyCode.ENTER]
  *    as part of the line for the [lineStream]
  *  * [navKeys] = [NUM_NAV] A map of keys to filter for in the [navStream]
  *  * [delKeys] = [DEFAULT_DEL_KEYS]
  *
  *     var keyboard = new ReactiveKeyboard(query("body"))
  */
 factory ReactiveKeyboard(
     Element target, {
       bool allowShiftOnlyHotKeys: false,
       bool allowAltKeyPress: false,
       bool allowEnterKeyPress: false,
       Map&lt;int, int&gt; navKeys: NUM_NAV,
       List&lt;int&gt; delKeys: DEFAULT_DEL_KEYS,
       Stream&lt;KeyEvent&gt; keyPressStream,
       Stream&lt;KeyEvent&gt; keyUpStream,
       Stream&lt;KeyEvent&gt; keyDownStream
     })
 {
   //@todo: make sure we don't need to do anything special for input or textareas
   var rkp = keyPressStream != null ? keyPressStream : KeyboardEventStream.onKeyPress(target);
   var rku = keyUpStream    != null ? keyUpStream    : KeyboardEventStream.onKeyUp(target);
   var rkd = keyDownStream  != null ? keyDownStream  : KeyboardEventStream.onKeyDown(target);

   rkd = rkd.map((key) {
     if ( delKeys.contains(key.keyCode)) {
       key.preventDefault();
     }

     return key;
   });

   var rkc = rkp.transform(new MergeAll(3, [rku, rkd])).asBroadcastStream();

   return new ReactiveKeyboard._(
     target,
     rkp,
     rku,
     rkd,
     rkc,
     allowShiftOnlyHotKeys: allowShiftOnlyHotKeys,
     allowAltKeyPress: allowAltKeyPress,
     allowEnterKeyPress: allowEnterKeyPress,
     navKeys: navKeys,
     delKeys: delKeys
   );
 }


 ReactiveKeyboard._(
     this._target,
     this.rawKeyPressStream,
     this.rawKeyUpStream,
     this.rawKeyDownStream,
     this.rawKeyCombinedStream,
     { allowShiftOnlyHotKeys, allowAltKeyPress, allowEnterKeyPress, navKeys, delKeys })
         : this.allowShiftOnlyHotKeys = allowShiftOnlyHotKeys,
           this.allowAltKeyPress = allowAltKeyPress,
           this.allowEnterKeyPress = allowEnterKeyPress,
           this.navKeys = navKeys,
           this.delKeys = delKeys;

 /**
  * A getter for `lineBuffer`.
  *
  * The string is an observable buffer for the lineStream
  */
 String get lineBuffer =&gt; _lineBuffer;

 /**
  * A setter for `lineBuffer`.
  *
  * The string is an observable buffer for the lineStream.  Set triggers change
  */
 set lineBuffer(line) {
   if (line != _lineBuffer) {
     _lineBuffer = notifyPropertyChange(const Symbol('lineBuffer'),
         _lineBuffer, line);

     _htmlLineBuffer = notifyPropertyChange(const Symbol('htmlLineBuffer'),
         _htmlLineBuffer, new HtmlEscape().convert(line).replaceAll(' ', '&amp;nbsp;'));
   }
 }

 /**
  * A getter for `htmlLineBuffer`.
  *
  * The string is an observable buffer for the lineStream
  */
 String get htmlLineBuffer =&gt; _htmlLineBuffer;


 /**
  * A getter for `keyStream`.
  *
  * The stream returned will include all key press events except for the
  * control key and only the alt key if `allowAltKeyPress` was set to true
  * in the constructor
  */
 Stream&lt;String&gt; get keyStream {
   if (_keyStream == null) {
     _keyStream = rawKeyCombinedStream.where((key) {
       return (key.type == KEY_PRESS &amp;&amp; !key.ctrlKey
           &amp;&amp; ( !key.altKey || (allowAltKeyPress &amp;&amp; key.altKey))
           &amp;&amp; (allowEnterKeyPress || !_ENTER_KEYS.contains(key.keyCode)));
     }).map((key) =&gt; new String.fromCharCode(key.charCode));
   }

   return _keyStream;
 }

 /**
  * A getter for `htmlKeyStream`.
  *
  * The stream returned will include all key press events except for the
  * control key and only the alt key if `allowAltKeyPress` was set to true
  * in the constructor, along with HTML characters escaped for easy printing
  */
 Stream&lt;String&gt; get htmlKeyStream =&gt; keyStream.transform(new HtmlEscape())
     .map((str) =&gt; str == ' ' ? '&amp;nbsp;' : str );


 /**
  * A getter for `htmlLineStream`
  *
  * The stream returned will be a stream of lines that will be the buffered
  * keyboard input up until an enter key was pressed. This stream will also
  * correctly handle deletion keys by removing the propper characters from
  * the buffered input. If the `allowEnterKeyPress` was set to true in the
  * construction of this object then the buffered lines will contain the
  * trailing enter keys.
  */
 Stream&lt;String&gt; get htmlLineStream =&gt;
     lineStream.transform(new HtmlEscape()).map((str) =&gt;
         str.replaceAll(' ', '&amp;nbsp;'));

 /**
  * A getter for `lineStream`
  *
  * The stream returned will be a stream of lines that will be the buffered
  * keyboard input up until an enter key was pressed. This stream will also
  * correctly handle deletion keys by removing the propper characters from
  * the buffered input. If the `allowEnterKeyPress` was set to true in the
  * construction of this object then the buffered lines will contain the
  * trailing enter keys.
  */
 Stream&lt;String&gt; get lineStream {
   var lineTransformer;
   {
     var _line = lineBuffer;
     var THIS = this;

     lineTransformer = new StreamTransformer(handleData: (key, sink) {
       if (key.type == KEY_PRESS
           &amp;&amp; (allowEnterKeyPress || !_ENTER_KEYS.contains(key.keyCode))) {
         THIS.lineBuffer = _line += new String.fromCharCode(key.charCode);
       } else if (key.type == KEY_DOWN) {
         if (_line.length &gt; 0 &amp;&amp; delKeys.contains(key.keyCode)) {
           THIS.lineBuffer = _line = _line.substring(0, _line.length - 1);
         } else if (_ENTER_KEYS.contains(key.keyCode)) {
           sink.add(_line);
           THIS.lineBuffer = _line = '';
         }
       }
     });
   }

   return  rawKeyCombinedStream.transform(lineTransformer);
 }


 /**
  * A getter for the `navStram`
  *
  * The stream returned will only consist of the ones specified in the
  * `navKeys` parameter used to construct this object.
  */
 Stream&lt;int&gt; get navStream {
   if (_navStream == null) {
     _navStream = rawKeyCombinedStream.where((key) {
       return key.type == KEY_DOWN &amp;&amp; navKeys.containsKey(key.keyCode);
     }).map((key) =&gt; navKeys[key.keyCode]);
   }

   return _navStream;
 }


 /**
  * A getter for the `hotKeyStream`
  *
  * The stream returned will be a stream of strings such that each string
  * emitted will be the human readable representation of the key presses
  * such that they are prefixed by their modifiers.
  */
 Stream&lt;String&gt; get hotKeyStream {
   if (_hotKeyStream == null) {
     var hotKeyTransformer = new StreamTransformer(handleData: (KeyEvent key, sink) {
       var hk = '';

       if (key.type == KEY_UP) {
         if (key.altKey) {
           hk += 'alt+';
         }
         if (key.altGraphKey) {
           hk += 'altgr+';
         }
         if (key.ctrlKey) {
           hk += 'ctrl+';
         }
         if (key.metaKey) {
           hk += 'meta+';
         }
         if (key.shiftKey) {
           hk += 'shift+';
         }

         if (hk.length &gt; 0) {
           if ((
               key.keyCode &gt;= 'A'.codeUnitAt(0)
               &amp;&amp; key.keyCode &lt;= 'Z'.codeUnitAt(0)
             ) ||
             (
               key.keyCode &gt;= '0'.codeUnitAt(0)
               &amp;&amp; key.keyCode &lt;= '9'.codeUnitAt(0)
             )
            ) {
             hk += new String.fromCharCode(key.keyCode);
           } else if (_COMBO_KEYS.containsKey(key.keyCode)) {
             hk += _COMBO_KEYS[key.keyCode];
           }
         }

         if (_SPECIAL_KEYS.containsKey(key.keyCode)) {
           hk += _SPECIAL_KEYS[key.keyCode];
         } else if (!allowShiftOnlyHotKeys &amp;&amp; hk.startsWith('shift+')) {
           hk = '';
         }

         if (hk.length &gt; 0 &amp;&amp; !hk.endsWith('+')) {
           sink.add(hk);
         }
       }
     });

     _hotKeyStream = rawKeyCombinedStream.transform(hotKeyTransformer);
   }

   return _hotKeyStream;
 }

}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../observe/ChangeNotifierMixin.html">ChangeNotifierMixin</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>ReactiveKeyboard</strong></span></p>
<div>
<h3>Static Properties</h3>
<div class="field"><h4 id="DEFAULT_DEL_KEYS">
<button class="show-code">Code</button>
const List&lt;int&gt;         <strong>DEFAULT_DEL_KEYS</strong> <a class="anchor-link"
            href="#DEFAULT_DEL_KEYS"
            title="Permalink to ReactiveKeyboard.DEFAULT_DEL_KEYS">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const List&lt;int&gt; DEFAULT_DEL_KEYS = const [KeyCode.DELETE, KeyCode.BACKSPACE, KeyCode.NUM_DELETE]
</pre>
</div>
</div>
<div class="field"><h4 id="E">
<button class="show-code">Code</button>
const int         <strong>E</strong> <a class="anchor-link"
            href="#E"
            title="Permalink to ReactiveKeyboard.E">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int E  = 90
</pre>
</div>
</div>
<div class="field"><h4 id="KEY_DOWN">
<button class="show-code">Code</button>
const String         <strong>KEY_DOWN</strong> <a class="anchor-link"
            href="#KEY_DOWN"
            title="Permalink to ReactiveKeyboard.KEY_DOWN">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const String KEY_DOWN  = 'keydown'
</pre>
</div>
</div>
<div class="field"><h4 id="KEY_PRESS">
<button class="show-code">Code</button>
const String         <strong>KEY_PRESS</strong> <a class="anchor-link"
            href="#KEY_PRESS"
            title="Permalink to ReactiveKeyboard.KEY_PRESS">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const String KEY_PRESS = 'keypress'
</pre>
</div>
</div>
<div class="field"><h4 id="KEY_UP">
<button class="show-code">Code</button>
const String         <strong>KEY_UP</strong> <a class="anchor-link"
            href="#KEY_UP"
            title="Permalink to ReactiveKeyboard.KEY_UP">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const String KEY_UP    = 'keyup'
</pre>
</div>
</div>
<div class="field"><h4 id="N">
<button class="show-code">Code</button>
const int         <strong>N</strong> <a class="anchor-link"
            href="#N"
            title="Permalink to ReactiveKeyboard.N">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int N  = 0
</pre>
</div>
</div>
<div class="field"><h4 id="NE">
<button class="show-code">Code</button>
const int         <strong>NE</strong> <a class="anchor-link"
            href="#NE"
            title="Permalink to ReactiveKeyboard.NE">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int NE = 45
</pre>
</div>
</div>
<div class="field"><h4 id="NW">
<button class="show-code">Code</button>
const int         <strong>NW</strong> <a class="anchor-link"
            href="#NW"
            title="Permalink to ReactiveKeyboard.NW">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int NW = 315
</pre>
</div>
</div>
<div class="field"><h4 id="S">
<button class="show-code">Code</button>
const int         <strong>S</strong> <a class="anchor-link"
            href="#S"
            title="Permalink to ReactiveKeyboard.S">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int S  = 180
</pre>
</div>
</div>
<div class="field"><h4 id="SE">
<button class="show-code">Code</button>
const int         <strong>SE</strong> <a class="anchor-link"
            href="#SE"
            title="Permalink to ReactiveKeyboard.SE">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int SE = 135
</pre>
</div>
</div>
<div class="field"><h4 id="SW">
<button class="show-code">Code</button>
const int         <strong>SW</strong> <a class="anchor-link"
            href="#SW"
            title="Permalink to ReactiveKeyboard.SW">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int SW = 225
</pre>
</div>
</div>
<div class="field"><h4 id="W">
<button class="show-code">Code</button>
const int         <strong>W</strong> <a class="anchor-link"
            href="#W"
            title="Permalink to ReactiveKeyboard.W">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int W  = 270
</pre>
</div>
</div>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="">
<button class="show-code">Code</button>
factory <strong>ReactiveKeyboard</strong>(Element target, {bool allowShiftOnlyHotKeys: false, bool allowAltKeyPress: false, bool allowEnterKeyPress: false, Map&lt;int, int&gt; navKeys: NUM_NAV, List&lt;int&gt; delKeys: DEFAULT_DEL_KEYS, Stream&lt;KeyEvent&gt; keyPressStream, Stream&lt;KeyEvent&gt; keyUpStream, Stream&lt;KeyEvent&gt; keyDownStream}) <a class="anchor-link" href="#"
              title="Permalink to ReactiveKeyboard.ReactiveKeyboard">#</a></h4>
<div class="doc">
<p>The Factory constructor for making a new <a class="crossref" href="../reactive_keyboard/ReactiveKeyboard.html">ReactiveKeyboard</a> object</p>
<p>Takes a target <a class="crossref" href="../dart_html/Element.html">Element</a> to observe <a class="crossref" href="../dart_html/KeyEvent.html">KeyEvent</a> from and some named
parameters to aid in the configuration of the ReactiveKeyboard. Optional
named argmuments are as follows:
 * 
<span class="param">allowShiftOnlyHotKeys</span> = false: Whether or not to capture shift only
   hot key modifiers--excludes shift+<em>SPECIAL</em>KEYS
 * 
<span class="param">allowAltKeyPress</span> = false: Whether or not to allow <code>KeyCode.ALT</code> key presses
   through the <a class="crossref" href="../reactive_keyboard/ReactiveKeyboard.html#keyStream">keyStream</a>
 * 
<span class="param">allowEnterKeyPress</span> = false: Whether or not to include the <code>KeyCode.ENTER</code>
   as part of the line for the <a class="crossref" href="../reactive_keyboard/ReactiveKeyboard.html#lineStream">lineStream</a>
 * 
<span class="param">navKeys</span> = <code>NUM_NAV</code> A map of keys to filter for in the <a class="crossref" href="../reactive_keyboard/ReactiveKeyboard.html#navStream">navStream</a>
 * 
<span class="param">delKeys</span> = [DEFAULT_DEL_KEYS]</p>
<pre><code>var keyboard = new ReactiveKeyboard(query("body"))
</code></pre>
<pre class="source">
factory ReactiveKeyboard(
   Element target, {
     bool allowShiftOnlyHotKeys: false,
     bool allowAltKeyPress: false,
     bool allowEnterKeyPress: false,
     Map&lt;int, int&gt; navKeys: NUM_NAV,
     List&lt;int&gt; delKeys: DEFAULT_DEL_KEYS,
     Stream&lt;KeyEvent&gt; keyPressStream,
     Stream&lt;KeyEvent&gt; keyUpStream,
     Stream&lt;KeyEvent&gt; keyDownStream
   })
{
 //@todo: make sure we don't need to do anything special for input or textareas
 var rkp = keyPressStream != null ? keyPressStream : KeyboardEventStream.onKeyPress(target);
 var rku = keyUpStream    != null ? keyUpStream    : KeyboardEventStream.onKeyUp(target);
 var rkd = keyDownStream  != null ? keyDownStream  : KeyboardEventStream.onKeyDown(target);

 rkd = rkd.map((key) {
   if ( delKeys.contains(key.keyCode)) {
     key.preventDefault();
   }

   return key;
 });

 var rkc = rkp.transform(new MergeAll(3, [rku, rkd])).asBroadcastStream();

 return new ReactiveKeyboard._(
   target,
   rkp,
   rku,
   rkd,
   rkc,
   allowShiftOnlyHotKeys: allowShiftOnlyHotKeys,
   allowAltKeyPress: allowAltKeyPress,
   allowEnterKeyPress: allowEnterKeyPress,
   navKeys: navKeys,
   delKeys: delKeys
 );
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="allowAltKeyPress">
<button class="show-code">Code</button>
bool         <strong>allowAltKeyPress</strong> <a class="anchor-link"
            href="#allowAltKeyPress"
            title="Permalink to ReactiveKeyboard.allowAltKeyPress">#</a>
        </h4>
        <div class="doc">
<pre class="source">
bool allowAltKeyPress
</pre>
</div>
</div>
<div class="field"><h4 id="allowEnterKeyPress">
<button class="show-code">Code</button>
bool         <strong>allowEnterKeyPress</strong> <a class="anchor-link"
            href="#allowEnterKeyPress"
            title="Permalink to ReactiveKeyboard.allowEnterKeyPress">#</a>
        </h4>
        <div class="doc">
<pre class="source">
bool allowEnterKeyPress
</pre>
</div>
</div>
<div class="field"><h4 id="allowShiftOnlyHotKeys">
<button class="show-code">Code</button>
bool         <strong>allowShiftOnlyHotKeys</strong> <a class="anchor-link"
            href="#allowShiftOnlyHotKeys"
            title="Permalink to ReactiveKeyboard.allowShiftOnlyHotKeys">#</a>
        </h4>
        <div class="doc">
<pre class="source">
bool allowShiftOnlyHotKeys
</pre>
</div>
</div>
<div class="field inherited"><h4 id="changes">
<button class="show-code">Code</button>
final Stream&lt;List&lt;<a href="../observe/ChangeRecord.html">ChangeRecord</a>&gt;&gt;         <strong>changes</strong> <a class="anchor-link"
            href="#changes"
            title="Permalink to ReactiveKeyboard.changes">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../observe/ChangeNotifierMixin.html">ChangeNotifierMixin</a> </div><div class="doc">
<div class="inherited">
<p>The stream of change records to this object. Records will be delivered
asynchronously.</p>
<p><a class="crossref" href="../observe/ChangeNotifierMixin.html#deliverChanges">deliverChanges</a> can be called to force synchronous delivery.</p>
<div class="docs-inherited-from">docs inherited from <a href="../observe/Observable.html">Observable</a> </div></div>
<pre class="source">
Stream&lt;List&lt;ChangeRecord&gt;&gt; get changes {
 if (_changes == null) {
   _changes = new StreamController.broadcast(sync: true,
       onListen: _observed, onCancel: _unobserved);
 }
 return _changes.stream;
}
</pre>
</div>
</div>
<div class="field"><h4 id="delKeys">
<button class="show-code">Code</button>
List&lt;int&gt;         <strong>delKeys</strong> <a class="anchor-link"
            href="#delKeys"
            title="Permalink to ReactiveKeyboard.delKeys">#</a>
        </h4>
        <div class="doc">
<pre class="source">
List&lt;int&gt; delKeys
</pre>
</div>
</div>
<div class="field inherited"><h4 id="hasObservers">
<button class="show-code">Code</button>
final bool         <strong>hasObservers</strong> <a class="anchor-link"
            href="#hasObservers"
            title="Permalink to ReactiveKeyboard.hasObservers">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../observe/ChangeNotifierMixin.html">ChangeNotifierMixin</a> </div><div class="doc">
<p>True if this object has any observers, and should call
<a class="crossref" href="../observe/ChangeNotifierMixin.html#notifyPropertyChange">notifyPropertyChange</a> for changes.</p>
<pre class="source">
bool get hasObservers =&gt; _changes != null &amp;&amp; _changes.hasListener;
</pre>
</div>
</div>
<div class="field"><h4 id="hotKeyStream">
<button class="show-code">Code</button>
final Stream&lt;String&gt;         <strong>hotKeyStream</strong> <a class="anchor-link"
            href="#hotKeyStream"
            title="Permalink to ReactiveKeyboard.hotKeyStream">#</a>
        </h4>
        <div class="doc">
<p>A getter for the <code>hotKeyStream</code></p>
<p>The stream returned will be a stream of strings such that each string
emitted will be the human readable representation of the key presses
such that they are prefixed by their modifiers.</p>
<pre class="source">
Stream&lt;String&gt; get hotKeyStream {
 if (_hotKeyStream == null) {
   var hotKeyTransformer = new StreamTransformer(handleData: (KeyEvent key, sink) {
     var hk = '';

     if (key.type == KEY_UP) {
       if (key.altKey) {
         hk += 'alt+';
       }
       if (key.altGraphKey) {
         hk += 'altgr+';
       }
       if (key.ctrlKey) {
         hk += 'ctrl+';
       }
       if (key.metaKey) {
         hk += 'meta+';
       }
       if (key.shiftKey) {
         hk += 'shift+';
       }

       if (hk.length &gt; 0) {
         if ((
             key.keyCode &gt;= 'A'.codeUnitAt(0)
             &amp;&amp; key.keyCode &lt;= 'Z'.codeUnitAt(0)
           ) ||
           (
             key.keyCode &gt;= '0'.codeUnitAt(0)
             &amp;&amp; key.keyCode &lt;= '9'.codeUnitAt(0)
           )
          ) {
           hk += new String.fromCharCode(key.keyCode);
         } else if (_COMBO_KEYS.containsKey(key.keyCode)) {
           hk += _COMBO_KEYS[key.keyCode];
         }
       }

       if (_SPECIAL_KEYS.containsKey(key.keyCode)) {
         hk += _SPECIAL_KEYS[key.keyCode];
       } else if (!allowShiftOnlyHotKeys &amp;&amp; hk.startsWith('shift+')) {
         hk = '';
       }

       if (hk.length &gt; 0 &amp;&amp; !hk.endsWith('+')) {
         sink.add(hk);
       }
     }
   });

   _hotKeyStream = rawKeyCombinedStream.transform(hotKeyTransformer);
 }

 return _hotKeyStream;
}
</pre>
</div>
</div>
<div class="field"><h4 id="htmlKeyStream">
<button class="show-code">Code</button>
final Stream&lt;String&gt;         <strong>htmlKeyStream</strong> <a class="anchor-link"
            href="#htmlKeyStream"
            title="Permalink to ReactiveKeyboard.htmlKeyStream">#</a>
        </h4>
        <div class="doc">
<p>A getter for <code>htmlKeyStream</code>.</p>
<p>The stream returned will include all key press events except for the
control key and only the alt key if <code>allowAltKeyPress</code> was set to true
in the constructor, along with HTML characters escaped for easy printing</p>
<pre class="source">
Stream&lt;String&gt; get htmlKeyStream =&gt; keyStream.transform(new HtmlEscape())
   .map((str) =&gt; str == ' ' ? '&amp;nbsp;' : str );
</pre>
</div>
</div>
<div class="field"><h4 id="htmlLineBuffer">
<button class="show-code">Code</button>
final String         <strong>htmlLineBuffer</strong> <a class="anchor-link"
            href="#htmlLineBuffer"
            title="Permalink to ReactiveKeyboard.htmlLineBuffer">#</a>
        </h4>
        <div class="doc">
<p>A getter for <code>htmlLineBuffer</code>.</p>
<p>The string is an observable buffer for the lineStream</p>
<pre class="source">
String get htmlLineBuffer =&gt; _htmlLineBuffer;
</pre>
</div>
</div>
<div class="field"><h4 id="htmlLineStream">
<button class="show-code">Code</button>
final Stream&lt;String&gt;         <strong>htmlLineStream</strong> <a class="anchor-link"
            href="#htmlLineStream"
            title="Permalink to ReactiveKeyboard.htmlLineStream">#</a>
        </h4>
        <div class="doc">
<p>A getter for <code>htmlLineStream</code></p>
<p>The stream returned will be a stream of lines that will be the buffered
keyboard input up until an enter key was pressed. This stream will also
correctly handle deletion keys by removing the propper characters from
the buffered input. If the <code>allowEnterKeyPress</code> was set to true in the
construction of this object then the buffered lines will contain the
trailing enter keys.</p>
<pre class="source">
Stream&lt;String&gt; get htmlLineStream =&gt;
   lineStream.transform(new HtmlEscape()).map((str) =&gt;
       str.replaceAll(' ', '&amp;nbsp;'));
</pre>
</div>
</div>
<div class="field"><h4 id="keyStream">
<button class="show-code">Code</button>
final Stream&lt;String&gt;         <strong>keyStream</strong> <a class="anchor-link"
            href="#keyStream"
            title="Permalink to ReactiveKeyboard.keyStream">#</a>
        </h4>
        <div class="doc">
<p>A getter for <code>keyStream</code>.</p>
<p>The stream returned will include all key press events except for the
control key and only the alt key if <code>allowAltKeyPress</code> was set to true
in the constructor</p>
<pre class="source">
Stream&lt;String&gt; get keyStream {
 if (_keyStream == null) {
   _keyStream = rawKeyCombinedStream.where((key) {
     return (key.type == KEY_PRESS &amp;&amp; !key.ctrlKey
         &amp;&amp; ( !key.altKey || (allowAltKeyPress &amp;&amp; key.altKey))
         &amp;&amp; (allowEnterKeyPress || !_ENTER_KEYS.contains(key.keyCode)));
   }).map((key) =&gt; new String.fromCharCode(key.charCode));
 }

 return _keyStream;
}
</pre>
</div>
</div>
<div class="method"><h4 id="lineBuffer">
<button class="show-code">Code</button>
String <strong>get lineBuffer</strong> <a class="anchor-link" href="#lineBuffer"
              title="Permalink to ReactiveKeyboard.get lineBuffer">#</a></h4>
<div class="doc">
<p>A getter for <code>lineBuffer</code>.</p>
<p>The string is an observable buffer for the lineStream</p>
<pre class="source">
String get lineBuffer =&gt; _lineBuffer;
</pre>
</div>
</div>
<div class="method"><h4 id="lineBuffer=">
<button class="show-code">Code</button>
dynamic <strong>set lineBuffer</strong>(line) <a class="anchor-link" href="#lineBuffer="
              title="Permalink to ReactiveKeyboard.set lineBuffer">#</a></h4>
<div class="doc">
<p>A setter for <code>lineBuffer</code>.</p>
<p>The string is an observable buffer for the lineStream.  Set triggers change</p>
<pre class="source">
set lineBuffer(line) {
 if (line != _lineBuffer) {
   _lineBuffer = notifyPropertyChange(const Symbol('lineBuffer'),
       _lineBuffer, line);

   _htmlLineBuffer = notifyPropertyChange(const Symbol('htmlLineBuffer'),
       _htmlLineBuffer, new HtmlEscape().convert(line).replaceAll(' ', '&amp;nbsp;'));
 }
}
</pre>
</div>
</div>
<div class="field"><h4 id="lineStream">
<button class="show-code">Code</button>
final Stream&lt;String&gt;         <strong>lineStream</strong> <a class="anchor-link"
            href="#lineStream"
            title="Permalink to ReactiveKeyboard.lineStream">#</a>
        </h4>
        <div class="doc">
<p>A getter for <code>lineStream</code></p>
<p>The stream returned will be a stream of lines that will be the buffered
keyboard input up until an enter key was pressed. This stream will also
correctly handle deletion keys by removing the propper characters from
the buffered input. If the <code>allowEnterKeyPress</code> was set to true in the
construction of this object then the buffered lines will contain the
trailing enter keys.</p>
<pre class="source">
Stream&lt;String&gt; get lineStream {
 var lineTransformer;
 {
   var _line = lineBuffer;
   var THIS = this;

   lineTransformer = new StreamTransformer(handleData: (key, sink) {
     if (key.type == KEY_PRESS
         &amp;&amp; (allowEnterKeyPress || !_ENTER_KEYS.contains(key.keyCode))) {
       THIS.lineBuffer = _line += new String.fromCharCode(key.charCode);
     } else if (key.type == KEY_DOWN) {
       if (_line.length &gt; 0 &amp;&amp; delKeys.contains(key.keyCode)) {
         THIS.lineBuffer = _line = _line.substring(0, _line.length - 1);
       } else if (_ENTER_KEYS.contains(key.keyCode)) {
         sink.add(_line);
         THIS.lineBuffer = _line = '';
       }
     }
   });
 }

 return  rawKeyCombinedStream.transform(lineTransformer);
}
</pre>
</div>
</div>
<div class="field"><h4 id="navKeys">
<button class="show-code">Code</button>
Map&lt;KeyCode, int&gt;         <strong>navKeys</strong> <a class="anchor-link"
            href="#navKeys"
            title="Permalink to ReactiveKeyboard.navKeys">#</a>
        </h4>
        <div class="doc">
<pre class="source">
Map&lt;KeyCode, int&gt; navKeys
</pre>
</div>
</div>
<div class="field"><h4 id="navStream">
<button class="show-code">Code</button>
final Stream&lt;int&gt;         <strong>navStream</strong> <a class="anchor-link"
            href="#navStream"
            title="Permalink to ReactiveKeyboard.navStream">#</a>
        </h4>
        <div class="doc">
<p>A getter for the <code>navStram</code></p>
<p>The stream returned will only consist of the ones specified in the
<code>navKeys</code> parameter used to construct this object.</p>
<pre class="source">
Stream&lt;int&gt; get navStream {
 if (_navStream == null) {
   _navStream = rawKeyCombinedStream.where((key) {
     return key.type == KEY_DOWN &amp;&amp; navKeys.containsKey(key.keyCode);
   }).map((key) =&gt; navKeys[key.keyCode]);
 }

 return _navStream;
}
</pre>
</div>
</div>
<div class="field"><h4 id="rawKeyCombinedStream">
<button class="show-code">Code</button>
final Stream&lt;KeyEvent&gt;         <strong>rawKeyCombinedStream</strong> <a class="anchor-link"
            href="#rawKeyCombinedStream"
            title="Permalink to ReactiveKeyboard.rawKeyCombinedStream">#</a>
        </h4>
        <div class="doc">
<pre class="source">
final Stream&lt;KeyEvent&gt; rawKeyCombinedStream
</pre>
</div>
</div>
<div class="field"><h4 id="rawKeyDownStream">
<button class="show-code">Code</button>
final Stream&lt;KeyEvent&gt;         <strong>rawKeyDownStream</strong> <a class="anchor-link"
            href="#rawKeyDownStream"
            title="Permalink to ReactiveKeyboard.rawKeyDownStream">#</a>
        </h4>
        <div class="doc">
<pre class="source">
final Stream&lt;KeyEvent&gt; rawKeyDownStream
</pre>
</div>
</div>
<div class="field"><h4 id="rawKeyPressStream">
<button class="show-code">Code</button>
final Stream&lt;KeyEvent&gt;         <strong>rawKeyPressStream</strong> <a class="anchor-link"
            href="#rawKeyPressStream"
            title="Permalink to ReactiveKeyboard.rawKeyPressStream">#</a>
        </h4>
        <div class="doc">
<pre class="source">
final Stream&lt;KeyEvent&gt; rawKeyPressStream
</pre>
</div>
</div>
<div class="field"><h4 id="rawKeyUpStream">
<button class="show-code">Code</button>
final Stream&lt;KeyEvent&gt;         <strong>rawKeyUpStream</strong> <a class="anchor-link"
            href="#rawKeyUpStream"
            title="Permalink to ReactiveKeyboard.rawKeyUpStream">#</a>
        </h4>
        <div class="doc">
<pre class="source">
final Stream&lt;KeyEvent&gt; rawKeyUpStream
</pre>
</div>
</div>
</div>
<div class="inherited">
<h3>Methods</h3>
<div class="method inherited"><h4 id="deliverChanges">
<button class="show-code">Code</button>
bool <strong>deliverChanges</strong>() <a class="anchor-link" href="#deliverChanges"
              title="Permalink to ReactiveKeyboard.deliverChanges">#</a></h4>
<div class="inherited-from">inherited from <a href="../observe/ChangeNotifierMixin.html">ChangeNotifierMixin</a> </div><div class="doc">
<div class="inherited">
<p>Synchronously deliver pending <a class="crossref" href="../observe/ChangeNotifierMixin.html#changes">changes</a>. Returns true if any records were
delivered, otherwise false.</p>
<div class="docs-inherited-from">docs inherited from <a href="../observe/Observable.html">Observable</a> </div></div>
<pre class="source">
bool deliverChanges() {
 var records = _records;
 _records = null;
 if (hasObservers &amp;&amp; records != null) {
   _changes.add(new UnmodifiableListView&lt;ChangeRecord&gt;(records));
   return true;
 }
 return false;
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="notifyChange">
<button class="show-code">Code</button>
void <strong>notifyChange</strong>(<a href="../observe/ChangeRecord.html">ChangeRecord</a> record) <a class="anchor-link" href="#notifyChange"
              title="Permalink to ReactiveKeyboard.notifyChange">#</a></h4>
<div class="inherited-from">inherited from <a href="../observe/ChangeNotifierMixin.html">ChangeNotifierMixin</a> </div><div class="doc">
<div class="inherited">
<p>Notify observers of a change.</p>
<p>For most objects <a class="crossref" href="../observe/ObservableMixin.html#notifyPropertyChange">ObservableMixin.notifyPropertyChange</a> is more
convenient, but collections sometimes deliver other types of changes such
as a <a class="crossref" href="../observe/ListChangeRecord.html">ListChangeRecord</a>.</p>
<div class="docs-inherited-from">docs inherited from <a href="../observe/Observable.html">Observable</a> </div></div>
<pre class="source">
void notifyChange(ChangeRecord record) {
 if (!hasObservers) return;

 if (_records == null) {
   _records = [];
   runAsync(deliverChanges);
 }
 _records.add(record);
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="notifyPropertyChange">
<button class="show-code">Code</button>
dynamic <strong>notifyPropertyChange</strong>(Symbol field, Object oldValue, Object newValue) <a class="anchor-link" href="#notifyPropertyChange"
              title="Permalink to ReactiveKeyboard.notifyPropertyChange">#</a></h4>
<div class="inherited-from">inherited from <a href="../observe/ChangeNotifierMixin.html">ChangeNotifierMixin</a> </div><div class="doc">
<p>Notify that the field <code>name</code> of this object has been changed.</p>
<p>The 
<span class="param">oldValue</span> and 
<span class="param">newValue</span> are also recorded. If the two values are
identical, no change will be recorded.</p>
<p>For convenience this returns 
<span class="param">newValue</span>. This makes it easy to use in a
setter:</p>
<pre><code>var _myField;
get myField =&gt; _myField;
set myField(value) {
  _myField = notifyPropertyChange(
      const Symbol('myField'), _myField, value);
}
</code></pre>
<pre class="source">
notifyPropertyChange(Symbol field, Object oldValue, Object newValue)
   =&gt; _notifyPropertyChange(this, field, oldValue, newValue);
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-10-09 21:03:05.929</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
